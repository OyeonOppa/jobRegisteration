<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบรับสมัครงาน</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const JobApplicationSystem = () => {
            const [formData, setFormData] = useState({
                fullName: '',
                email: '',
                phone: '',
                address: '',
                education: '',
                experience: '',
                position: '',
                salary: '',
                startDate: '',
                skills: '',
                portfolio: '',
                coverLetter: ''
            });

            const [currentStep, setCurrentStep] = useState('form');
            const [isSubmitting, setIsSubmitting] = useState(false);

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                setFormData(prev => ({
                    ...prev,
                    [name]: value
                }));
            };

            const handleSubmit = async () => {
                setIsSubmitting(true);
                
                try {
                    // TODO: ใส่ URL ของ Google Apps Script ตรงนี้
                    const GOOGLE_SCRIPT_URL = '14r1rXFwJfXkJcZxi3Llb5lhvPIRsOtM56da-piSbb7U';
                    
                    if (GOOGLE_SCRIPT_URL === '14r1rXFwJfXkJcZxi3Llb5lhvPIRsOtM56da-piSbb7U') {
                        // กรณียังไม่ได้ใส่ URL จริง - จำลองการทำงาน
                        console.log('ข้อมูลที่จะส่ง:', formData);
                        setTimeout(() => {
                            alert('⚠️ ยังไม่ได้เชื่อมต่อ Google Sheets\n\nกรุณาใส่ URL ของ Google Apps Script ใน GOOGLE_SCRIPT_URL');
                            setCurrentStep('success');
                            setIsSubmitting(false);
                        }, 2000);
                        return;
                    }
                    
                    const response = await fetch(GOOGLE_SCRIPT_URL, {
                        method: 'POST',
                        mode: 'cors',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(formData)
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        setCurrentStep('success');
                    } else {
                        alert('เกิดข้อผิดพลาด: ' + result.message);
                    }
                    
                } catch (error) {
                    console.error('Error:', error);
                    alert('เกิดข้อผิดพลาดในการส่งข้อมูล');
                } finally {
                    setIsSubmitting(false);
                }
            };

            const resetForm = () => {
                setFormData({
                    fullName: '', email: '', phone: '', address: '', education: '',
                    experience: '', position: '', salary: '', startDate: '', skills: '',
                    portfolio: '', coverLetter: ''
                });
                setCurrentStep('form');
            };

            // ฟอร์มกรอกข้อมูล
            if (currentStep === 'form') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 py-8">
                        <div className="max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg">
                            <div className="mb-8 text-center">
                                <h1 className="text-3xl font-bold text-gray-800 mb-2">ใบสมัครงาน</h1>
                                <p className="text-gray-600">กรุณากรอกข้อมูลให้ครบถ้วน</p>
                            </div>

                            <div className="space-y-6">
                                {/* ข้อมูลส่วนตัว */}
                                <div className="bg-blue-50 p-6 rounded-lg">
                                    <h2 className="text-xl font-semibold text-gray-800 mb-4">ข้อมูลส่วนตัว</h2>
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">ชื่อ-นามสกุล *</label>
                                            <input
                                                type="text"
                                                name="fullName"
                                                value={formData.fullName}
                                                onChange={handleInputChange}
                                                required
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                placeholder="กรอกชื่อ-นามสกุล"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">อีเมล *</label>
                                            <input
                                                type="email"
                                                name="email"
                                                value={formData.email}
                                                onChange={handleInputChange}
                                                required
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                placeholder="example@email.com"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">เบอร์โทรศัพท์ *</label>
                                            <input
                                                type="tel"
                                                name="phone"
                                                value={formData.phone}
                                                onChange={handleInputChange}
                                                required
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                placeholder="0XX-XXX-XXXX"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">ตำแหน่งที่สมัคร *</label>
                                            <select
                                                name="position"
                                                value={formData.position}
                                                onChange={handleInputChange}
                                                required
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            >
                                                <option value="">เลือกตำแหน่ง</option>
                                                <option value="Frontend Developer">Frontend Developer</option>
                                                <option value="Backend Developer">Backend Developer</option>
                                                <option value="Full Stack Developer">Full Stack Developer</option>
                                                <option value="UI/UX Designer">UI/UX Designer</option>
                                                <option value="Project Manager">Project Manager</option>
                                                <option value="Marketing Executive">Marketing Executive</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div className="mt-4">
                                        <label className="block text-sm font-medium text-gray-700 mb-2">ที่อยู่</label>
                                        <textarea
                                            name="address"
                                            value={formData.address}
                                            onChange={handleInputChange}
                                            rows="3"
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            placeholder="กรอกที่อยู่"
                                        />
                                    </div>
                                </div>

                                {/* การศึกษาและประสบการณ์ */}
                                <div className="bg-green-50 p-6 rounded-lg">
                                    <h2 className="text-xl font-semibold text-gray-800 mb-4">การศึกษาและประสบการณ์</h2>
                                    <div className="space-y-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">การศึกษา</label>
                                            <input
                                                type="text"
                                                name="education"
                                                value={formData.education}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                placeholder="เช่น ปริญญาตรี คอมพิวเตอร์ จุฬาลงกรณ์มหาวิทยาลัย"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">ประสบการณ์การทำงาน</label>
                                            <textarea
                                                name="experience"
                                                value={formData.experience}
                                                onChange={handleInputChange}
                                                rows="4"
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                placeholder="อธิบายประสบการณ์การทำงานของคุณ"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">ทักษะ/ความสามารถ</label>
                                            <input
                                                type="text"
                                                name="skills"
                                                value={formData.skills}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                placeholder="เช่น JavaScript, React, Node.js, Photoshop"
                                            />
                                        </div>
                                    </div>
                                </div>

                                {/* รายละเอียดการทำงาน */}
                                <div className="bg-yellow-50 p-6 rounded-lg">
                                    <h2 className="text-xl font-semibold text-gray-800 mb-4">รายละเอียดการทำงาน</h2>
                                    <div className="grid md:grid-cols-2 gap-4">
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">เงินเดือนที่ต้องการ</label>
                                            <input
                                                type="text"
                                                name="salary"
                                                value={formData.salary}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                                placeholder="เช่น 30,000 - 40,000 บาท"
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm font-medium text-gray-700 mb-2">วันที่สามารถเริ่มงานได้</label>
                                            <input
                                                type="date"
                                                name="startDate"
                                                value={formData.startDate}
                                                onChange={handleInputChange}
                                                className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            />
                                        </div>
                                    </div>
                                    <div className="mt-4">
                                        <label className="block text-sm font-medium text-gray-700 mb-2">Portfolio / ผลงาน (URL)</label>
                                        <input
                                            type="url"
                                            name="portfolio"
                                            value={formData.portfolio}
                                            onChange={handleInputChange}
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            placeholder="https://yourportfolio.com"
                                        />
                                    </div>
                                    <div className="mt-4">
                                        <label className="block text-sm font-medium text-gray-700 mb-2">จดหมายสมัครงาน</label>
                                        <textarea
                                            name="coverLetter"
                                            value={formData.coverLetter}
                                            onChange={handleInputChange}
                                            rows="4"
                                            className="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                            placeholder="แสดงความสนใจและเหตุผลที่ต้องการทำงานกับเรา"
                                        />
                                    </div>
                                </div>

                                {/* ปุ่ม */}
                                <div className="flex gap-4 justify-center">
                                    <button
                                        onClick={() => setCurrentStep('preview')}
                                        className="px-6 py-3 bg-gray-500 text-white font-medium rounded-lg hover:bg-gray-600 transition-colors"
                                    >
                                        📄 ดูตัวอย่างใบสมัคร
                                    </button>
                                    <button
                                        onClick={handleSubmit}
                                        disabled={isSubmitting}
                                        className="px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50"
                                    >
                                        {isSubmitting ? '⏳ กำลังส่งข้อมูล...' : '📤 ส่งใบสมัคร'}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            }

            // หน้าดูตัวอย่าง
            if (currentStep === 'preview') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 py-8">
                        <div className="max-w-4xl mx-auto p-6 bg-white rounded-lg shadow-lg">
                            <div className="mb-8 text-center">
                                <h1 className="text-3xl font-bold text-gray-800 mb-2">ตัวอย่างใบสมัครงาน</h1>
                                <p className="text-gray-600">ตรวจสอบข้อมูลก่อนส่ง</p>
                            </div>

                            <div className="border-2 border-gray-300 p-8 rounded-lg bg-gray-50">
                                <div className="text-center mb-6">
                                    <h2 className="text-2xl font-bold text-gray-800">บริษัท ABC จำกัด</h2>
                                    <p className="text-gray-600">ใบสมัครงาน</p>
                                </div>

                                <div className="space-y-4">
                                    <div className="grid md:grid-cols-2 gap-6">
                                        <div>
                                            <p><strong>ชื่อ-นามสกุล:</strong> {formData.fullName || '-'}</p>
                                            <p><strong>อีเมล:</strong> {formData.email || '-'}</p>
                                            <p><strong>เบอร์โทรศัพท์:</strong> {formData.phone || '-'}</p>
                                        </div>
                                        <div>
                                            <p><strong>ตำแหน่งที่สมัคร:</strong> {formData.position || '-'}</p>
                                            <p><strong>เงินเดือนที่ต้องการ:</strong> {formData.salary || '-'}</p>
                                            <p><strong>วันที่สามารถเริ่มงาน:</strong> {formData.startDate || '-'}</p>
                                        </div>
                                    </div>

                                    {formData.address && (
                                        <div><p><strong>ที่อยู่:</strong></p><p className="ml-4">{formData.address}</p></div>
                                    )}
                                    {formData.education && <p><strong>การศึกษา:</strong> {formData.education}</p>}
                                    {formData.skills && <p><strong>ทักษะ:</strong> {formData.skills}</p>}
                                    {formData.experience && (
                                        <div><p><strong>ประสบการณ์:</strong></p><p className="ml-4 whitespace-pre-line">{formData.experience}</p></div>
                                    )}
                                    {formData.portfolio && (
                                        <p><strong>Portfolio:</strong> <a href={formData.portfolio} target="_blank" className="text-blue-600 hover:underline">{formData.portfolio}</a></p>
                                    )}
                                    {formData.coverLetter && (
                                        <div><p><strong>จดหมายสมัครงาน:</strong></p><p className="ml-4 whitespace-pre-line">{formData.coverLetter}</p></div>
                                    )}
                                </div>
                            </div>

                            <div className="flex gap-4 justify-center mt-8">
                                <button
                                    onClick={() => setCurrentStep('form')}
                                    className="px-6 py-3 bg-gray-500 text-white font-medium rounded-lg hover:bg-gray-600 transition-colors"
                                >
                                    ✏️ แก้ไขข้อมูล
                                </button>
                                <button
                                    onClick={handleSubmit}
                                    disabled={isSubmitting}
                                    className="px-6 py-3 bg-green-600 text-white font-medium rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50"
                                >
                                    {isSubmitting ? '⏳ กำลังส่งข้อมูล...' : '✅ ยืนยันและส่งใบสมัคร'}
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            // หน้าสำเร็จ
            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-100 to-purple-100 py-8">
                    <div className="max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg text-center">
                        <div className="text-green-500 text-6xl mb-4">✅</div>
                        <h1 className="text-3xl font-bold text-gray-800 mb-4">ส่งใบสมัครเรียบร้อย!</h1>
                        <p className="text-gray-600 mb-6">
                            ขอบคุณที่ส่งใบสมัครงานมาให้เรา เราจะติดต่อกลับภายใน 3-5 วันทำการ
                        </p>
                        <div className="bg-blue-50 p-4 rounded-lg mb-6">
                            <p className="text-sm text-blue-800">
                                <strong>หมายเหตุ:</strong> ข้อมูลของคุณได้ถูกบันทึกลงใน Google Sheets เรียบร้อยแล้ว
                            </p>
                        </div>
                        <button
                            onClick={resetForm}
                            className="px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors"
                        >
                            🔄 สมัครงานใหม่
                        </button>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<JobApplicationSystem />, document.getElementById('root'));
    </script>
</body>

</html>
